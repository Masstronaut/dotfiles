# custom leader/prefix key
unbind C-b
set-option -g prefix C-Space
bind-key C-Space send-prefix

# source the config file more easily with leader-r
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# load colors from rose-pine theme
run-shell ~/.config/tmux/load-colors.sh

# enable true-color support
set -g default-terminal "tmux-256color"
set -sg terminal-overrides ",*:RGB"

# Enable mouse events
set-option -g focus-events on
set -g mouse on

# Status bar
set -g status-style bg=default,fg="#{@muted}",bright
set -g window-status-current-style fg="#{@gold}"
set-option -g status-left "#[fg=#{@rose}]"
# Show current path, replace $HOME with ~ if the path is in the home directory
set -g status-right '#(echo "#{pane_current_path}" | sed "s|^$HOME|~|")'
# Window numbers should always match their index in the status bar
set -g renumber-windows on

set -g window-status-format "#[fg=#{@iris},bg=#{@base}]#[fg=#{@base},bg=#{@iris}]#I #[fg=#{@iris},bg=#{@overlay}] #{b:pane_current_path}#[fg=#{@overlay},bg=#{@base}]"
set -g window-status-current-format "#[fg=#{@gold},bg=#{@base}]#[fg=#{@base},bg=#{@gold}]#I #[fg=#{@gold},bg=#{@overlay}] #{b:pane_current_path}#[fg=#{@overlay},bg=#{@base}]"


# Window panes
set -g pane-border-lines heavy
set -g pane-border-style fg="#{@muted}"
set -g pane-active-border-style fg="#{@gold}"
set -g pane-border-status top
# set -g pane-border-indicators arrows

# de-emphasize inactive panes
set -g window-style bg="#{@base}"
set -g window-active-style bg="#{@base}"

# Split navigation with Alt+hjkl (no leader key needed)
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Window navigation with Alt+digit and Alt+n/p (no leader key needed)
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9
bind -n M-0 select-window -t 0
bind -n M-n next-window
bind -n M-p previous-window

# New windows and panes inherit current working directory
bind c new-window -c "#{pane_current_path}"
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# Swap current window with specific position (prefix + #)
bind 1 swap-window -t 1
bind 2 swap-window -t 2
bind 3 swap-window -t 3
bind 4 swap-window -t 4
bind 5 swap-window -t 5
bind 6 swap-window -t 6
bind 7 swap-window -t 7
bind 8 swap-window -t 8
bind 9 swap-window -t 9
bind 0 swap-window -t 0


# status bar theming
set -g status-position top

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.config/tmux/plugins/tpm/tpm'

